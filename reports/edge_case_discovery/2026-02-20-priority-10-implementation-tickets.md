# 우선 구현 10개 이슈 템플릿 (2026-02-20)

기준 문서: `reports/edge_case_discovery/2026-02-20-edge-case-catalog.md`  
우선순위: `P0`(즉시) / `P1`(차순위)

---

## TICKET-01 (P0) | EC-082 출력 경로 권한 오류 상위 전파
- 목적: 저장 실패를 성공처럼 보이지 않게 하고 종료 상태를 정확히 반영
- 범위:
  - `Save-Results` 예외를 상위로 전파
  - 메인 스크립트에서 종료 코드/실패 로그 통일
- 작업 항목:
  - [ ] 저장 단계 실패 시 `throw` 보장
  - [ ] 호출부에서 실패 시 non-zero 종료 코드 반영
  - [ ] 실패 로그 포맷 통일(`[FAIL] Save-Results ...`)
- 완료 기준:
  - 권한 없는 경로에서 실행 시 보고서 생성 성공 메시지가 출력되지 않는다.
  - 프로세스 종료 코드는 실패로 반환된다.
- 테스트 케이스:
  - 권한 없는 폴더를 `-OutputPath`로 실행 후 종료 코드 확인
  - 로그에 실패 원인(권한/경로) 포함 여부 확인

## TICKET-02 (P0) | EC-025 수집 블록 무한 대기 방지
- 목적: 특정 모듈 Hang이 전체 실행 중단으로 번지지 않게 방지
- 범위:
  - 모듈 단위 실행 타임아웃 정책 정의
  - 타임아웃 발생 시 실패 상태로 수집 결과에 기록
- 작업 항목:
  - [ ] 모듈 타임아웃 기본값 및 오버라이드 파라미터 설계
  - [ ] 타임아웃 시 중단/해제 처리 구현
  - [ ] 타임아웃 원인 로그 표준화
- 완료 기준:
  - 의도적으로 지연된 모듈이 타임아웃으로 종료되어도 전체 스크립트는 완료된다.
- 테스트 케이스:
  - 테스트 더블로 10분 대기 모듈 주입 후 타임아웃 처리 검증
  - 나머지 모듈 산출물 생성 여부 확인

## TICKET-03 (P0) | EC-073 병렬 태스크 타임아웃 격리
- 목적: 병렬 수집 시 느린 모듈만 실패 처리하고 전체를 유지
- 범위:
  - Runspace 타임아웃 처리 명확화
  - 타임아웃 모듈 결과 구조화(`TimedOut`, `elapsedMs`)
- 작업 항목:
  - [ ] 타임아웃 발생 시 결과 객체 스키마 추가
  - [ ] 성공/실패 모듈 요약 집계 반영
  - [ ] 타임아웃 발생 시 자원 정리 보장
- 완료 기준:
  - 병렬 수집에서 1개 태스크 타임아웃 시 다른 태스크 결과가 정상 저장된다.
- 테스트 케이스:
  - 병렬 3개 중 1개 지연 주입 후 결과 집계 검증
  - 타임아웃 모듈 상태코드 확인

## TICKET-04 (P0) | EC-074 EndInvoke 예외 누락 방지
- 목적: 병렬 runspace 예외가 숨겨지지 않도록 명시화
- 범위:
  - `EndInvoke` 예외 catch/변환 로직 구현
  - 예외 상세를 모듈별 에러 메타데이터로 저장
- 작업 항목:
  - [ ] `EndInvoke` 예외를 구조화 에러로 변환
  - [ ] 스택/메시지/모듈명 로그 출력
  - [ ] 최종 요약에 runspace 예외 카운트 포함
- 완료 기준:
  - runspace 예외 발생 시 `"Error: ..."` 문자열 누락 없이 구조화된 실패 정보가 남는다.
- 테스트 케이스:
  - runspace 내부 강제 throw 시 에러 메타데이터 검증
  - 요약 리포트에 실패 모듈 반영 확인

## TICKET-05 (P0) | EC-080 Ctrl+C 인터럽트 정리
- 목적: 강제 중단 시 Mutex/파일/핸들 누수 방지
- 범위:
  - 인터럽트 시 `finally` 정리 경로 보강
  - 중간 산출물 정리 정책 수립
- 작업 항목:
  - [ ] 인터럽트 신호 처리 루틴 추가
  - [ ] Mutex 해제, runspace dispose, 임시파일 정리 보장
  - [ ] 중단 상태 로그 표준화
- 완료 기준:
  - 중단 후 재실행 시 Mutex 충돌이 발생하지 않는다.
- 테스트 케이스:
  - 실행 중 Ctrl+C 주입 후 즉시 재실행 검증
  - 임시파일/핸들 잔존 여부 확인

## TICKET-06 (P0) | EC-096 재서명 누락 커밋 차단
- 목적: 서명 누락 파일이 리포지토리에 유입되지 않게 자동 차단
- 범위:
  - 커밋 전 서명 검증 스크립트 추가
  - `Valid` 아닌 `.ps1` 발견 시 실패 처리
- 작업 항목:
  - [ ] 검증 스크립트(`utils/` 또는 `tests/`) 추가
  - [ ] Git hook 또는 CI 단계 연결
  - [ ] 실패 시 파일 목록 출력
- 완료 기준:
  - 미서명/HashMismatch `.ps1`가 있으면 커밋 또는 CI가 실패한다.
- 테스트 케이스:
  - 임의 `.ps1` 수정 후 재서명 없이 검증 실행
  - 실패 목록/메시지 정확도 확인

## TICKET-07 (P1) | EC-087 결과 파일명 충돌 방지
- 목적: 동일 초 실행 시 산출물 덮어쓰기 방지
- 범위:
  - 타임스탬프 정밀도 상향(ms) 또는 GUID suffix 추가
  - JSON/HTML/CSV/EventLog/ZIP 규칙 동기화
- 작업 항목:
  - [ ] 파일명 생성 함수 공통화
  - [ ] 기존 패턴과 호환성 검토
  - [ ] 문서 예시 업데이트
- 완료 기준:
  - 같은 초에 2회 실행해도 파일명 충돌이 발생하지 않는다.
- 테스트 케이스:
  - 연속 실행(1초 내) 후 파일명 중복 여부 검증

## TICKET-08 (P1) | EC-088 암호화 중 파일 잠금 예외 처리
- 목적: 잠금 파일 상황에서 실패 원인 가시화 및 보안성 유지
- 범위:
  - 암호화 I/O 예외 재시도 정책
  - 실패 시 평문 파일 잔존 여부 명확 기록
- 작업 항목:
  - [ ] 파일 잠금 예외 분기 처리
  - [ ] 재시도 횟수/간격 설정
  - [ ] 보안 경고 로그 추가
- 완료 기준:
  - 파일 잠금 시 암호화 실패가 조용히 무시되지 않고 원인이 기록된다.
- 테스트 케이스:
  - 타 프로세스로 파일 잠금 후 Encrypt 실행
  - 실패 로그와 최종 파일 상태 확인

## TICKET-09 (P1) | EC-091 ZIP 후 중간파일 삭제 실패 정책
- 목적: 정리 실패를 운영에서 추적 가능한 상태로 전환
- 범위:
  - 삭제 실패 항목 집계/요약
  - 결과 상태(`SuccessWithWarnings`) 도입 검토
- 작업 항목:
  - [ ] 삭제 실패 파일 목록 수집
  - [ ] 최종 요약에 정리 실패 카운트 출력
  - [ ] 실패 기준(치명/경고) 정의
- 완료 기준:
  - ZIP 성공 + 삭제 실패 시 경고 상태로 명확히 구분된다.
- 테스트 케이스:
  - 일부 파일 잠금으로 삭제 실패 유도
  - 최종 상태와 경고 로그 확인

## TICKET-10 (P1) | EC-029 민감정보 마스킹 패턴 확장
- 목적: 누락 패턴으로 인한 정보 노출 위험 축소
- 범위:
  - 마스킹 키워드 사전 확장(`apiKey`, `auth_token`, `clientSecret` 등)
  - 오탐/미탐 밸런스 조정
- 작업 항목:
  - [ ] 키워드 룰셋 확장
  - [ ] 테스트 데이터셋 추가
  - [ ] 기존 로그 포맷 영향 검토
- 완료 기준:
  - 신규 패턴이 마스킹되고 정상 문자열은 과마스킹되지 않는다.
- 테스트 케이스:
  - 민감/비민감 샘플 20개 이상으로 회귀 테스트
  - 마스킹 결과 스냅샷 비교

---

## 권장 실행 순서
1. TICKET-01
2. TICKET-02
3. TICKET-03
4. TICKET-04
5. TICKET-05
6. TICKET-06
7. TICKET-07
8. TICKET-08
9. TICKET-09
10. TICKET-10

